<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Question 5</title>
    <style>
        .container {
            display: flex;
            justify-content: space-between;
        }

        .actions, .answers {
            width: 45%;
        }

        .dropzone {
            width: 100%;
            min-height: 50px;
            margin-bottom: 10px;
            padding: 10px;
            border: 1px dashed #ccc;
            background-color: #f9f9f9;
        }

        .draggable {
            padding: 8px;
            margin: 5px;
            background-color: #f0f0f0;
            border: 1px solid #ccc;
            cursor: move;
        }

        .highlight {
            background-color: yellow;
        }

        .incorrect {
            color: red;
        }

        #solutionInfo5 {
            display: none; /* Cacher par défaut */
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <h1>Question 5</h1>
    <p>You create a new Azure subscription.<br>
    You plan to deploy Azure Active Directory Domain Services (Azure AD DS) and Azure virtual machines.<br>
    You need to ensure that the virtual machines can join to Azure AD DS.<br>
    Which three actions should you perform in sequence? To answer, move the appropriate actions from the list of actions to the answer area and arrange them in the correct order.<br><br/>
    Select and Place:</p>

    <div class="container">
        <div class="actions">
            <h3>Actions:</h3>
            <div id="actionsList">
                <div class="draggable" draggable="true" data-action="1">Modify the settings of the Azure virtual network</div>
                <div class="draggable" draggable="true" data-action="2">Install the AD DS role</div>
                <div class="draggable" draggable="true" data-action="3">Install AAD Connect</div>
                <div class="draggable" draggable="true" data-action="4">Create an Azure virtual network</div>
                <div class="draggable" draggable="true" data-action="5">Create an Azure AD DS instance</div>
                <div class="draggable" draggable="true" data-action="6">Run the AD DS installation Wizard</div>
            </div>
        </div>

        <div class="answers">
            <h3>Answer Area:</h3>
            <div id="answerArea">
                <div class="dropzone" data-answer-slot="1">Drop Action Here</div>
                <div class="dropzone" data-answer-slot="2">Drop Action Here</div>
                <div class="dropzone" data-answer-slot="3">Drop Action Here</div>
            </div>
        </div>
    </div>

    <div id="solutionInfo5"></div> <!-- Div pour afficher la réponse -->

    <button class="solutionButton" data-solution-info-id="solutionInfo5" data-correct-answer="4,5,1" data-answer-name="answer5" data-solution-text="Solution: 1. Create an Azure virtual network, 2. Create an Azure AD DS instance, 3. Modify the settings of the Azure virtual network">Solution</button>

    <script>
        let score = 0;

        document.addEventListener('DOMContentLoaded', () => {
            const draggables = document.querySelectorAll('.draggable');
            const dropzones = document.querySelectorAll('.dropzone');

            draggables.forEach(draggable => {
                draggable.addEventListener('dragstart', (e) => {
                    e.dataTransfer.setData('text/plain', e.target.dataset.action);
                });
            });

            dropzones.forEach(dropzone => {
                dropzone.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    dropzone.classList.add('highlight');
                });

                dropzone.addEventListener('dragleave', () => {
                    dropzone.classList.remove('highlight');
                });

                dropzone.addEventListener('drop', (e) => {
                    e.preventDefault();
                    const action = e.dataTransfer.getData('text/plain');
                    const draggedElement = document.querySelector(`.draggable[data-action='${action}']`);
                    if (draggedElement) {
                        e.target.textContent = draggedElement.textContent;
                        e.target.dataset.action = action;
                        dropzone.classList.remove('highlight');
                    }
                });
            });

            const solutionButton = document.querySelector('.solutionButton');
            solutionButton.addEventListener('click', function() {
                const solutionInfoId = this.dataset.solutionInfoId;
                const correctAnswer = this.dataset.correctAnswer.split(',');
                let isCorrect = true;

                const userAnswer = Array.from(dropzones).map(dropzone => dropzone.dataset.action);
                
                userAnswer.forEach((answer, index) => {
                    if (answer !== correctAnswer[index]) {
                        isCorrect = false;
                    }
                });

                const solutionText = this.dataset.solutionText;
                const solutionInfo = document.getElementById(solutionInfoId);
                solutionInfo.innerHTML = solutionText + "<br>Your Answer: " + userAnswer.map(action => {
                    return document.querySelector(`.draggable[data-action='${action}']`).textContent;
                }).join(', ');
                solutionInfo.style.display = 'block';

                if (isCorrect) {
                    solutionInfo.classList.add('highlight');
                    score += 1; // Ajouter un point si la réponse est correcte
                } else {
                    solutionInfo.innerHTML = "Your answer is incorrect. " + solutionInfo.innerHTML;
                    solutionInfo.classList.add('incorrect');
                }

                showFinalScore();
            });

            function showFinalScore() {
                const finalScoreElement = document.getElementById('finalScore');
                if (finalScoreElement) {
                    finalScoreElement.textContent = `Score: ${score}`;
                } else {
                    const scoreElement = document.createElement('div');
                    scoreElement.id = 'finalScore';
                    scoreElement.textContent = `Score: ${score}`;
                    document.body.appendChild(scoreElement);
                }
            }
        });
    </script>
</body>
</html>

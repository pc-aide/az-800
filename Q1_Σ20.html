<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Questionnaire</title>
    <style>
        .highlight {
            background-color: yellow;
        }

        .incorrect {
            color: red;
        }

        #solutionInfo {
            display: none; /* Cacher par défaut */
            margin-bottom: 10px;
        }

        #finalScore {
            font-size: larger;
            margin-top: 20px;
            font-weight: bold;
        }

        .container {
            display: flex;
            justify-content: space-between;
        }

        .actions, .answers {
            width: 45%;
        }

        .dropzone {
            width: 100%;
            min-height: 50px;
            margin-bottom: 10px;
            padding: 10px;
            border: 1px dashed #ccc;
            background-color: #f9f9f9;
        }

        .draggable {
            padding: 8px;
            margin: 5px;
            background-color: #f0f0f0;
            border: 1px solid #ccc;
            cursor: move;
        }
    </style>
</head>
<body>
    <h1>Questionnaire</h1>

    <h2 id="finalScoreHeader"></h2> <!-- Afficher le score final dans le header -->

    <div id="questionContainer">
        <!-- Contenu de question1.html -->
        <div>
            <h1>Question 1</h1>
            <h2>Your network contains an Active Directory Domain Services (AD DS) domain named contoso.com. You need to identify which server is the PDC emulator for the domain.</h2>
            <p><strong>Solution:</strong> From Active Directory Domains and Trusts, you right-click Active Directory Domains and Trusts in the console tree, and then select Operations Master.</p>

            <form action="#">
                <fieldset>
                    <legend>Does this meet the goal?</legend>
                    <input type="radio" id="yes1" name="answer1" value="yes">
                    <label for="yes1">A. Yes</label><br>
                    <input type="radio" id="no1" name="answer1" value="no">
                    <label for="no1">B. No</label><br>
                </fieldset>
            </form>

            <div id="solutionInfo1"></div> <!-- Div pour afficher la réponse -->

            <button class="solutionButton" data-solution-info-id="solutionInfo1" data-correct-answer="no" data-answer-name="answer1" data-solution-text="<img src='https://raw.githubusercontent.com/pc-aide/Azure/main/az-800%3A%20Administering%20Windows%20Server%20Hybrid%20Core%20Infrastructure/Exam/Pre-Exam/Pra01_%CE%A320/PDC%20role.png' alt='PDC Role'><br><img src='https://raw.githubusercontent.com/pc-aide/Azure/main/az-800%3A%20Administering%20Windows%20Server%20Hybrid%20Core%20Infrastructure/Exam/Pre-Exam/Pra01_%CE%A320/PDC.png' alt='PDC Image'><br>Solution: B. No">Solution</button>
        </div>

        <!-- Contenu de question2.html -->
        <div>
            <h1>Question 2</h1>
            <h2>Your network contains an Active Directory Domain Services (AD DS) domain named contoso.com. You need to identify which server is the PDC emulator for the domain.</h2>
            <p><strong>Solution:</strong> From a command prompt, you run netdom.exe query fsmo.</p>

            <form action="#">
                <fieldset>
                    <legend>Does this meet the goal?</legend>
                    <input type="radio" id="yes2" name="answer2" value="yes">
                    <label for="yes2">A. Yes</label><br>
                    <input type="radio" id="no2" name="answer2" value="no">
                    <label for="no2">B. No</label><br>
                </fieldset>
            </form>

            <div id="solutionInfo2"></div> <!-- Div pour afficher la réponse -->

            <button class="solutionButton" data-solution-info-id="solutionInfo2" data-correct-answer="yes" data-answer-name="answer2" data-solution-text="<img src='https://raw.githubusercontent.com/pc-aide/Azure/main/az-800%3A%20Administering%20Windows%20Server%20Hybrid%20Core%20Infrastructure/Exam/Pre-Exam/Pra01_%CE%A320/netdom%20query%20fsmo.png' alt='Netdom Query FSMO'><br>Solution: A. Yes">Solution</button>
        </div>

        <!-- Contenu de question3.html -->
        <div>
            <h1>Question 3</h1>
            <h2>You have an on-premises Active Directory Domain Services (AD DS) domain that syncs with an Azure Active Directory (Azure AD) tenant. You plan to implement self-service password reset (SSPR) in Azure AD. You need to ensure that users that reset their passwords by using SSPR can use the new password resources in the AD DS domain. What should you do?</h2>

            <form action="#">
                <fieldset>
                    <legend>What should you do?</legend>
                    <input type="radio" id="optionA" name="answer3" value="A">
                    <label for="optionA">A. Deploy the Azure AD Password Protection proxy service to the on-premises network.</label><br>
                    <input type="radio" id="optionB" name="answer3" value="B">
                    <label for="optionB">B. Run the Microsoft Azure Active Directory Connect wizard and select Password writeback.</label><br>
                    <input type="radio" id="optionC" name="answer3" value="C">
                    <label for="optionC">C. Grant the Change password permission for the domain to the Azure AD Connect service account.</label><br>
                    <input type="radio" id="optionD" name="answer3" value="D">
                    <label for="optionD">D. Grant the impersonate a client after authentication user right to the Azure AD Connect service account.</label><br>
                </fieldset>
            </form>

            <div id="solutionInfo3"></div> <!-- Div pour afficher la réponse -->

            <button class="solutionButton" data-solution-info-id="solutionInfo3" data-correct-answer="B" data-answer-name="answer3" data-solution-text="Solution: B. Run the Microsoft Azure Active Directory Connect wizard and select Password writeback.">Solution</button>
        </div>

        <!-- Contenu de question4.html -->
        <div>
            <h1>Question 4</h1>
            <h2>You have an Azure Active Directory Domain Services (Azure AD DS) domain named contoso.com. You need to provide an administrator with the ability to manage Group Policy Objects (GPOs). The solution must use the principle of least privilege. To which group should you add the administrator?</h2>

            <form action="#">
                <fieldset>
                    <legend>To which group should you add the administrator?</legend>
                    <input type="radio" id="optionA" name="answer4" value="A">
                    <label for="optionA">A. AAD DC Administrators</label><br>
                    <input type="radio" id="optionB" name="answer4" value="B">
                    <label for="optionB">B. Domain Admins</label><br>
                    <input type="radio" id="optionC" name="answer4" value="C">
                    <label for="optionC">C. Schema Admins</label><br>
                    <input type="radio" id="optionD" name="answer4" value="D">
                    <label for="optionD">D. Enterprise Admins</label><br>
                    <input type="radio" id="optionE" name="answer4" value="E">
                    <label for="optionE">E. Group Policy Creator Owners</label><br>
                </fieldset>
            </form>

            <div id="solutionInfo4"></div> <!-- Div pour afficher la réponse -->

            <button class="solutionButton" data-solution-info-id="solutionInfo4" data-correct-answer="A" data-answer-name="answer4" data-solution-text="Solution: A. AAD DC Administrators">Solution</button>
        </div>

        <!-- Contenu de question5 intégré directement -->
        <div>
            <h1>Question 5</h1>
            <p>You create a new Azure subscription.<br>
            You plan to deploy Azure Active Directory Domain Services (Azure AD DS) and Azure virtual machines.<br>
            You need to ensure that the virtual machines can join to Azure AD DS.<br>
            Which three actions should you perform in sequence? To answer, move the appropriate actions from the list of actions to the answer area and arrange them in the correct order.<br><br/>
            Select and Place:</p>

            <div class="container">
                <div class="actions">
                    <h3>Actions:</h3>
                    <div id="actionsList5">
                        <div class="draggable" draggable="true" data-action="1">Modify the settings of the Azure virtual network</div>
                        <div class="draggable" draggable="true" data-action="2">Install the AD DS role</div>
                        <div class="draggable" draggable="true" data-action="3">Install AAD Connect</div>
                        <div class="draggable" draggable="true" data-action="4">Create an Azure virtual network</div>
                        <div class="draggable" draggable="true" data-action="5">Create an Azure AD DS instance</div>
                        <div class="draggable" draggable="true" data-action="6">Run the AD DS installation Wizard</div>
                    </div>
                </div>

                <div class="answers">
                    <h3>Answer Area:</h3>
                    <div id="answerArea5">
                        <div class="dropzone" data-answer-slot="1">Drop Action Here</div>
                        <div class="dropzone" data-answer-slot="2">Drop Action Here</div>
                        <div class="dropzone" data-answer-slot="3">Drop Action Here</div>
                    </div>
                </div>
            </div>

            <div id="solutionInfo5"></div> <!-- Div pour afficher la réponse -->

            <button class="solutionButton" data-solution-info-id="solutionInfo5" data-correct-answer="4,5,1" data-answer-name="answer5" data-solution-text="Solution: 1. Create an Azure virtual network, 2. Create an Azure AD DS instance, 3. Modify the settings of the Azure virtual network">Solution</button>
        </div>

        <!-- Contenu de question6.html -->
        <div>
            <h1>Question 6</h1>
            <p>You have an Azure Active Directory Domain Services (Azure AD DS) domain.<br>
            You create a new user named Admin1.<br><br>
            You need Admin1 to deploy custom Group Policy settings to all the computers in the domain.<br><br>The solution must use the principle of least privilege.<br>
            What should you include in the solution? To answer, select the appropriate options in the answer area.<br><br/>
            NOTE: Each correct selection is worth one point.</p>

            <div class="answer-area">
                <div class="question-row">
                    <span>Add Admin1 to the following group:</span>
                    <select data-answer="1">
                        <option value="AAD DC Administrators">AAD DC Administrators</option>
                        <option value="Domain Admins">Domain Admins</option>
                        <option value="Group Policy Creator Owners">Group Policy Creator Owners</option>
                    </select>
                </div>

                <div class="question-row">
                    <span>Instruct Admin1 to apply the custom Group Policy settings by:</span>
                    <select data-answer="2">
                        <option value="Creating a new GPO & linking the GPO to the domain">Creating a new GPO and linking the GPO to the domain</option>
                        <option value="Modifying AADDC Computers GPO">Modifying AADDC Computers GPO</option>
                        <option value="Modifying the default domain GPO">Modifying the default domain GPO</option>
                    </select>
                </div>
            </div>

            <div id="solutionInfo6"></div> <!-- Div pour afficher la réponse -->

            <button class="solutionButton" data-solution-info-id="solutionInfo6" data-correct-answer="AAD DC Administrators,Modifying AADDC Computers GPO" data-answer-name="answer6" data-solution-text="Solution: 1. AAD DC Administrators, 2. Modifying AADDC Computers GPO">Solution</button>
        </div>

        <!-- Contenu de question7 intégré directement -->
        <div>
            <h1>Question 7</h1>
            <p>Your network contains a single domain Active Directory Domain Services (AD DS) forest named contoso.com. The forest contains a single Active Directory site.
            You plan to deploy a read only domain controller (RODC) to a new datacenter on a server named Server1.<br><br>
            You need to recommend a deployment plan that meets the following requirements: 
            </p>
            <p>
                ✑ Ensures that a user named User1 can perform the RODC installation on Server1<br>
                ✑ Ensures that you can control the AD DS replication schedule to the Server1<br>
                ✑ Ensures that Server1 is in a new site named RemoteSite1
            </p>
            <p>
                Uses the principle of least privilege
            </p>
            <p>Which three actions should you recommend performing in sequence? To answer, move the appropriate actions from the list of actions to the answer area and arrange them in the correct order.<br><br/>
            Select and Place:</p>

            <div class="container">
                <div class="actions">
                    <h3>Actions:</h3>
                    <div id="actionsList7">
                        <div class="draggable" draggable="true" data-action="1">Instruct user1 to run the AD DS installation Wizard on Server1</div>
                        <div class="draggable" draggable="true" data-action="2">Create a site & a subnet</div>
                        <div class="draggable" draggable="true" data-action="3">Create a site link</div>
                        <div class="draggable" draggable="true" data-action="4">Pre-create an RODC account</div>
                        <div class="draggable" draggable="true" data-action="5">Add User1 to the Contoso\Administrators group</div>
                    </div>
                </div>

                <div class="answers">
                    <h3>Answer Area:</h3>
                    <div id="answerArea7">
                        <div class="dropzone" data-answer-slot="1">Drop Action Here</div>
                        <div class="dropzone" data-answer-slot="2">Drop Action Here</div>
                        <div class="dropzone" data-answer-slot="3">Drop Action Here</div>
                    </div>
                </div>
            </div>

            <div id="solutionInfo7"></div> <!-- Div pour afficher la réponse -->

            <button class="solutionButton" data-solution-info-id="solutionInfo7" data-correct-answer="2,4,1" data-answer-name="answer7" data-solution-text="Solution: 1. Create a site & a subnet, 2. Pre-create an RODC account, 3. Instruct user1 to run the AD DS installation Wizard on Server1">Solution</button>
        </div>
    </div> <!-- Fin du div questionContainer -->

    <div id="finalScore"></div> <!-- Div pour afficher le score final -->

    <script>
        var score = 0; // Initialiser le score à 0
        var totalQuestions = 7; // Nombre total de questions

        function enableDragAndDrop() {
            document.querySelectorAll('.actions').forEach(container => {
                const draggables = container.querySelectorAll('.draggable');
                const dropzones = container.nextElementSibling.querySelectorAll('.dropzone');

                draggables.forEach(draggable => {
                    draggable.addEventListener('dragstart', (e) => {
                        e.dataTransfer.setData('text/plain', e.target.dataset.action);
                        e.dataTransfer.effectAllowed = 'move';
                    });
                });

                dropzones.forEach(dropzone => {
                    dropzone.addEventListener('dragover', (e) => {
                        e.preventDefault();
                        e.dataTransfer.dropEffect = 'move';
                        dropzone.classList.add('highlight');
                    });

                    dropzone.addEventListener('dragleave', () => {
                        dropzone.classList.remove('highlight');
                    });

                    dropzone.addEventListener('drop', (e) => {
                        e.preventDefault();
                        const data = e.dataTransfer.getData('text/plain');
                        const draggedElement = container.querySelector(`.draggable[data-action='${data}']`);
                        if (draggedElement) {
                            e.target.textContent = draggedElement.textContent;
                            e.target.dataset.action = data;
                            dropzone.classList.remove('highlight');
                        }
                    });
                });
            });
        }

        function showFinalScore() {
            var percentage = (score / totalQuestions) * 100; // Calculer le score en pourcentage
            document.getElementById('finalScore').textContent = "Final Score: " + score + "/" + totalQuestions + " (" + percentage.toFixed(2) + "%)";
            document.getElementById('finalScoreHeader').textContent = "Final Score: " + score + "/" + totalQuestions + " (" + percentage.toFixed(2) + "%)"; // Afficher le score final dans le header
        }

        document.addEventListener('DOMContentLoaded', function() {
            enableDragAndDrop();

            // Re-attacher les écouteurs d'événements pour chaque bouton "Solution"
            var solutionButtons = document.querySelectorAll('.solutionButton');
            solutionButtons.forEach(button => {
                button.addEventListener('click', function() {
                    var solutionInfoId = this.dataset.solutionInfoId;
                    var correctAnswer = this.dataset.correctAnswer.split(',');
                    let isCorrect = true;

                    if (this.dataset.answerName === 'answer5' || this.dataset.answerName === 'answer7') {
                        // Logique spécifique pour les questions 5 et 7
                        const dropzones = this.dataset.answerName === 'answer5' 
                            ? document.querySelectorAll('#answerArea5 .dropzone') 
                            : document.querySelectorAll('#answerArea7 .dropzone');
                        const userAnswer = Array.from(dropzones).map(dropzone => dropzone.dataset.action);

                        userAnswer.forEach((answer, index) => {
                            if (answer !== correctAnswer[index]) {
                                isCorrect = false;
                            }
                        });

                        const solutionText = this.dataset.solutionText;
                        const solutionInfo = document.getElementById(solutionInfoId);
                        if (isCorrect) {
                            solutionInfo.innerHTML = solutionText + "<br>Your Answer: " + userAnswer.map(action => {
                                return this.dataset.answerName === 'answer5' 
                                    ? document.querySelector(`#actionsList5 .draggable[data-action='${action}']`).textContent
                                    : document.querySelector(`#actionsList7 .draggable[data-action='${action}']`).textContent;
                            }).join(', ');
                            solutionInfo.classList.add('highlight');
                            score += 1; // Ajouter un point si la réponse est correcte
                        } else {
                            solutionInfo.innerHTML = "Your answer is incorrect. Please select the correct answer to see the solution.";
                            solutionInfo.classList.add('incorrect');
                        }

                        solutionInfo.style.display = 'block';
                        showFinalScore();
                    } else if (this.dataset.answerName === 'answer6') {
                        // Logique spécifique pour la question 6
                        const select1 = document.querySelector('select[data-answer="1"]').value;
                        const select2 = document.querySelector('select[data-answer="2"]').value;
                        const userAnswer = [select1, select2];
                        
                        userAnswer.forEach((answer, index) => {
                            if (answer !== correctAnswer[index]) {
                                isCorrect = false;
                            }
                        });

                        const solutionText = this.dataset.solutionText;
                        const solutionInfo = document.getElementById(solutionInfoId);
                        if (isCorrect) {
                            solutionInfo.innerHTML = solutionText + "<br>Your Answer: " + userAnswer.join(', ');
                            solutionInfo.classList.add('highlight');
                            score += 1; // Ajouter un point si la réponse est correcte
                        } else {
                            solutionInfo.innerHTML = "Your answer is incorrect. Please select the correct answer to see the solution.";
                            solutionInfo.classList.add('incorrect');
                        }

                        solutionInfo.style.display = 'block';
                        showFinalScore();
                    } else {
                        // Logique pour les autres questions (1 à 4)
                        var selectedAnswer = document.querySelector('input[name="' + this.dataset.answerName + '"]:checked');
                        if (selectedAnswer && selectedAnswer.value === correctAnswer[0]) {
                            score += 1; // Ajouter un point si la réponse est correcte
                            var solutionText = this.dataset.solutionText;
                            var highlightedAnswer = document.createElement('div');
                            highlightedAnswer.innerHTML = solutionText;
                            highlightedAnswer.classList.add('highlight'); // Ajouter la classe de surlignage
                            document.getElementById(solutionInfoId).textContent = ""; // Effacer tout contenu précédent
                            document.getElementById(solutionInfoId).appendChild(highlightedAnswer); // Afficher la réponse au-dessus du bouton Solution
                            document.getElementById(solutionInfoId).style.display = 'block'; // Afficher l'info
                        } else {
                            var incorrectMessage = document.createElement('div');
                            incorrectMessage.textContent = "Your answer is incorrect. Please select the correct answer to see the solution.";
                            incorrectMessage.classList.add('incorrect');
                            document.getElementById(solutionInfoId).textContent = ""; // Effacer tout contenu précédent
                            document.getElementById(solutionInfoId).appendChild(incorrectMessage); // Afficher le message d'erreur
                            document.getElementById(solutionInfoId).style.display = 'block'; // Afficher l'info
                        }
                        showFinalScore();
                    }
                });
            });
        });
    </script>
</body>
</html>
